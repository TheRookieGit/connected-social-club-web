# 用户照片页面使用指南

## 功能概述

用户照片页面 (`/user-photos`) 是一个专门用于展示和管理用户在注册时上传的照片的页面。该页面提供了完整的照片查看、个人资料编辑等功能。

## 主要功能

### 1. 照片展示
- **照片网格**：以网格形式展示用户上传的所有照片
- **照片计数**：显示当前照片总数
- **照片编号**：每张照片右下角显示编号
- **响应式布局**：支持不同屏幕尺寸的适配

### 2. 照片查看
- **点击放大**：点击任意照片可全屏查看
- **照片导航**：在全屏模式下可以左右切换照片
- **照片信息**：显示当前照片的序号和总数
- **键盘支持**：支持ESC键关闭照片查看

### 3. 个人资料展示
- **用户头像**：显示用户头像或首字母
- **基本信息**：姓名、邮箱、年龄、位置、职业、学校等
- **个人简介**：显示用户的个人介绍
- **信息图标**：使用图标直观显示不同类型的信息

### 4. 个人资料编辑
- **编辑模式**：点击"编辑资料"按钮进入编辑模式
- **字段编辑**：支持编辑个人简介、职业、位置、学校、身高等
- **实时保存**：编辑完成后点击保存按钮更新资料
- **取消编辑**：可以取消编辑并恢复原始数据

### 5. 导航功能
- **返回按钮**：返回上一页面
- **添加照片**：如果没有照片，提供添加照片的快捷入口

## 页面结构

```
/user-photos
├── 顶部导航栏
│   ├── 返回按钮
│   ├── 页面标题
│   └── 编辑资料按钮
├── 用户基本信息卡片
│   ├── 头像区域
│   ├── 用户信息
│   └── 个人简介
├── 照片展示区域
│   ├── 照片标题和计数
│   ├── 照片网格
│   └── 空状态提示
├── 编辑模式区域（可选）
│   ├── 编辑表单
│   └── 保存/取消按钮
└── 照片查看模态框（可选）
    ├── 照片显示
    ├── 导航按钮
    └── 关闭按钮
```

## 访问方式

### 1. 从仪表板访问
- 在仪表板页面点击导航栏中的相机图标
- 直接跳转到用户照片页面

### 2. 从个人资料模态框访问
- 打开个人资料模态框
- 在照片区域点击"查看全部照片"链接
- 在新标签页中打开照片页面

### 3. 直接访问
- 浏览器地址栏输入 `/user-photos`
- 需要用户已登录

## 技术实现

### 前端技术
- **React**：使用函数组件和Hooks
- **TypeScript**：类型安全的代码
- **Tailwind CSS**：响应式样式设计
- **Lucide React**：图标库
- **Next.js Image**：优化的图片组件

### 状态管理
- **useState**：管理页面状态
- **useEffect**：处理副作用
- **useRouter**：页面导航

### API集成
- **GET /api/user/profile**：获取用户资料
- **PUT /api/user/profile**：更新用户资料

### 数据存储
- **photos字段**：JSONB类型，存储照片URL数组
- **用户资料**：包含所有用户信息字段

## 响应式设计

### 移动端适配
- 照片网格：2列布局
- 信息展示：单列布局
- 按钮大小：适合触摸操作

### 平板适配
- 照片网格：3列布局
- 信息展示：2列布局
- 模态框：适中尺寸

### 桌面端适配
- 照片网格：4列布局
- 信息展示：4列网格
- 模态框：大尺寸显示

## 用户体验优化

### 1. 加载状态
- 页面加载时显示加载动画
- 数据获取失败时显示错误提示

### 2. 交互反馈
- 按钮悬停效果
- 照片点击反馈
- 编辑状态提示

### 3. 错误处理
- 网络错误处理
- 数据验证
- 用户友好的错误提示

### 4. 性能优化
- 图片懒加载
- 组件按需渲染
- 缓存策略

## 测试页面

访问 `/test-user-photos` 可以测试页面的不同状态：
- 有照片状态：显示测试照片
- 无照片状态：显示空状态
- 功能测试：测试各种交互功能

## 未来扩展

### 可能的功能增强
1. **照片管理**：删除、重新排序照片
2. **照片上传**：直接在页面中上传新照片
3. **照片编辑**：裁剪、滤镜等编辑功能
4. **照片分享**：分享到社交媒体
5. **照片隐私**：设置照片可见性

### 技术优化
1. **图片压缩**：自动压缩上传的图片
2. **CDN加速**：使用CDN加速图片加载
3. **缓存策略**：优化图片缓存
4. **PWA支持**：支持离线查看

## 注意事项

1. **权限控制**：只有登录用户才能访问
2. **数据安全**：照片URL需要验证权限
3. **性能考虑**：大量照片时的加载优化
4. **兼容性**：支持主流浏览器
5. **可访问性**：支持键盘导航和屏幕阅读器 