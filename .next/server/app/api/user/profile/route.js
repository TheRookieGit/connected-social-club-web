/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/user/profile/route";
exports.ids = ["app/api/user/profile/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2Fprofile%2Froute&page=%2Fapi%2Fuser%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2Fprofile%2Froute.ts&appDir=%2FUsers%2Fvincent%2FDesktop%2Fsocial%20club%20web%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvincent%2FDesktop%2Fsocial%20club%20web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2Fprofile%2Froute&page=%2Fapi%2Fuser%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2Fprofile%2Froute.ts&appDir=%2FUsers%2Fvincent%2FDesktop%2Fsocial%20club%20web%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvincent%2FDesktop%2Fsocial%20club%20web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_vincent_Desktop_social_club_web_app_api_user_profile_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/user/profile/route.ts */ \"(rsc)/./app/api/user/profile/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/user/profile/route\",\n        pathname: \"/api/user/profile\",\n        filename: \"route\",\n        bundlePath: \"app/api/user/profile/route\"\n    },\n    resolvedPagePath: \"/Users/vincent/Desktop/social club web/app/api/user/profile/route.ts\",\n    nextConfigOutput,\n    userland: _Users_vincent_Desktop_social_club_web_app_api_user_profile_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/user/profile/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1c2VyJTJGcHJvZmlsZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGdXNlciUyRnByb2ZpbGUlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ1c2VyJTJGcHJvZmlsZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnZpbmNlbnQlMkZEZXNrdG9wJTJGc29jaWFsJTIwY2x1YiUyMHdlYiUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZ2aW5jZW50JTJGRGVza3RvcCUyRnNvY2lhbCUyMGNsdWIlMjB3ZWImaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ29CO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc29jaWFsLWNsdWItd2ViLz84MTY5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy92aW5jZW50L0Rlc2t0b3Avc29jaWFsIGNsdWIgd2ViL2FwcC9hcGkvdXNlci9wcm9maWxlL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS91c2VyL3Byb2ZpbGUvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS91c2VyL3Byb2ZpbGVcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3VzZXIvcHJvZmlsZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy92aW5jZW50L0Rlc2t0b3Avc29jaWFsIGNsdWIgd2ViL2FwcC9hcGkvdXNlci9wcm9maWxlL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS91c2VyL3Byb2ZpbGUvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2Fprofile%2Froute&page=%2Fapi%2Fuser%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2Fprofile%2Froute.ts&appDir=%2FUsers%2Fvincent%2FDesktop%2Fsocial%20club%20web%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvincent%2FDesktop%2Fsocial%20club%20web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/user/profile/route.ts":
/*!***************************************!*\
  !*** ./app/api/user/profile/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PUT: () => (/* binding */ PUT),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n\n\n// 禁用静态生成\nconst dynamic = \"force-dynamic\";\n// 创建 Supabase 客户端的函数 - 强制刷新连接\nfunction createSupabaseClient() {\n    const supabaseUrl = \"https://ckhxivbcnagwgpzljzrl.supabase.co\" || 0;\n    const supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNraHhpdmJjbmFnd2dwemxqenJsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM1MjQwMzgsImV4cCI6MjA2OTEwMDAzOH0.ZxoO8QQ9G3tggQFRCHjdnulgv45KtVyx6B7TnqrdHx4\" || 0;\n    try {\n        // 创建新的客户端实例，避免缓存问题\n        const client = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(supabaseUrl, supabaseAnonKey, {\n            auth: {\n                persistSession: false // 禁用会话持久化\n            }\n        });\n        return client;\n    } catch (error) {\n        console.error(\"Supabase client creation failed:\", error);\n        return null;\n    }\n}\n// 验证 JWT token\nfunction verifyToken(authHeader) {\n    if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n        return null;\n    }\n    const token = authHeader.substring(7);\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, process.env.JWT_SECRET || \"your-secret-key\");\n        return decoded;\n    } catch (error) {\n        console.error(\"Token verification failed:\", error);\n        return null;\n    }\n}\n// 获取用户资料\nasync function GET(request) {\n    try {\n        const supabase = createSupabaseClient();\n        if (!supabase) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"数据库连接失败\"\n            }, {\n                status: 500\n            });\n        }\n        const authHeader = request.headers.get(\"authorization\");\n        const decoded = verifyToken(authHeader);\n        if (!decoded) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"未授权访问\"\n            }, {\n                status: 401\n            });\n        }\n        console.log(\"获取用户资料，用户ID:\", decoded.userId);\n        // 获取用户资料 - 使用 * 查询所有字段，强制刷新\n        console.log(\"开始查询用户ID:\", decoded.userId);\n        console.log(\"使用的Supabase URL:\", \"https://ckhxivbcnagwgpzljzrl.supabase.co\" || 0);\n        // 强制刷新：添加时间戳避免缓存\n        const { data: user, error: userError } = await supabase.from(\"users\").select(\"*\").eq(\"id\", decoded.userId).single();\n        console.log(\"查询到的用户数据:\", user);\n        console.log(\"bio字段值:\", user?.bio);\n        console.log(\"location字段值:\", user?.location);\n        console.log(\"updated_at字段值:\", user?.updated_at);\n        if (userError || !user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"用户不存在\"\n            }, {\n                status: 404\n            });\n        }\n        // 获取用户兴趣\n        const { data: interests, error: interestsError } = await supabase.from(\"user_interests\").select(\"interest\").eq(\"user_id\", decoded.userId);\n        // 获取用户偏好\n        const { data: preferences, error: preferencesError } = await supabase.from(\"user_preferences\").select(\"*\").eq(\"user_id\", decoded.userId).single();\n        // 记录活动日志\n        await supabase.from(\"user_activity_logs\").insert({\n            user_id: decoded.userId,\n            activity_type: \"profile_view\",\n            activity_data: {\n                profile_id: decoded.userId\n            }\n        });\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify({\n            success: true,\n            timestamp: new Date().toISOString(),\n            user: {\n                ...user,\n                interests: interests?.map((i)=>i.interest) || [],\n                preferences: preferences || null\n            }\n        }), {\n            status: 200,\n            headers: {\n                \"Cache-Control\": \"no-store, no-cache, must-revalidate, proxy-revalidate\",\n                \"Pragma\": \"no-cache\",\n                \"Expires\": \"0\",\n                \"Surrogate-Control\": \"no-store\"\n            }\n        });\n    } catch (error) {\n        console.error(\"获取用户资料错误:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"服务器错误\"\n        }, {\n            status: 500\n        });\n    }\n}\n// 更新用户资料\nasync function PUT(request) {\n    try {\n        const supabase = createSupabaseClient();\n        if (!supabase) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"数据库连接失败\"\n            }, {\n                status: 500\n            });\n        }\n        const authHeader = request.headers.get(\"authorization\");\n        console.log(\"Authorization header:\", authHeader ? \"存在\" : \"不存在\");\n        const decoded = verifyToken(authHeader);\n        console.log(\"Token解码结果:\", decoded);\n        if (!decoded) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"未授权访问\"\n            }, {\n                status: 401\n            });\n        }\n        console.log(\"用户ID:\", decoded.userId);\n        console.log(\"用户邮箱:\", decoded.email);\n        const updateData = await request.json();\n        console.log(\"接收到的原始数据:\", updateData);\n        // 允许更新的字段\n        const allowedFields = [\n            \"name\",\n            \"phone\",\n            \"birth_date\",\n            \"gender\",\n            \"avatar_url\",\n            \"bio\",\n            \"location\",\n            \"occupation\",\n            \"education\",\n            \"relationship_status\",\n            \"height\",\n            \"weight\"\n        ];\n        const filteredData = {};\n        allowedFields.forEach((field)=>{\n            if (updateData[field] !== undefined) {\n                filteredData[field] = updateData[field];\n                console.log(`字段 ${field}: ${updateData[field]} -> ${filteredData[field]}`);\n            }\n        });\n        console.log(\"过滤后的数据:\", filteredData);\n        console.log(\"用户ID:\", decoded.userId);\n        // 更新用户资料 - 使用事务确保数据一致性\n        console.log(\"开始更新数据库...\");\n        const { data: updatedUser, error: updateError, count } = await supabase.from(\"users\").update(filteredData).eq(\"id\", decoded.userId).select().single();\n        console.log(\"更新结果:\", {\n            updatedUser,\n            updateError,\n            count\n        });\n        if (updateError) {\n            console.error(\"更新用户资料错误:\", updateError);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"更新失败\"\n            }, {\n                status: 500\n            });\n        }\n        if (!updatedUser) {\n            console.error(\"更新操作没有返回用户数据\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"更新失败 - 没有返回数据\"\n            }, {\n                status: 500\n            });\n        }\n        console.log(\"更新后的用户数据:\", updatedUser);\n        // 注意：由于数据库连接问题，我们直接返回更新操作返回的数据\n        // 而不是进行确认查询，因为确认查询可能返回旧数据\n        // 更新兴趣（如果提供）\n        if (updateData.interests && Array.isArray(updateData.interests)) {\n            // 删除现有兴趣\n            await supabase.from(\"user_interests\").delete().eq(\"user_id\", decoded.userId);\n            // 插入新兴趣\n            if (updateData.interests.length > 0) {\n                const interestsData = updateData.interests.map((interest)=>({\n                        user_id: decoded.userId,\n                        interest: interest.trim()\n                    }));\n                await supabase.from(\"user_interests\").insert(interestsData);\n            }\n        }\n        // 更新偏好（如果提供）\n        if (updateData.preferences) {\n            const { error: prefError } = await supabase.from(\"user_preferences\").upsert({\n                user_id: decoded.userId,\n                ...updateData.preferences\n            });\n            if (prefError) {\n                console.error(\"更新用户偏好错误:\", prefError);\n            }\n        }\n        // 记录活动日志\n        await supabase.from(\"user_activity_logs\").insert({\n            user_id: decoded.userId,\n            activity_type: \"profile_update\",\n            activity_data: {\n                updated_fields: Object.keys(filteredData)\n            }\n        });\n        // 获取最新的兴趣数据\n        const { data: latestInterests } = await supabase.from(\"user_interests\").select(\"interest\").eq(\"user_id\", decoded.userId);\n        // 获取最新的偏好数据\n        const { data: latestPreferences } = await supabase.from(\"user_preferences\").select(\"*\").eq(\"user_id\", decoded.userId).single();\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify({\n            success: true,\n            message: \"更新成功\",\n            timestamp: new Date().toISOString(),\n            user: {\n                ...updatedUser,\n                interests: latestInterests?.map((i)=>i.interest) || [],\n                preferences: latestPreferences || null\n            }\n        }), {\n            status: 200,\n            headers: {\n                \"Cache-Control\": \"no-store, no-cache, must-revalidate, proxy-revalidate\",\n                \"Pragma\": \"no-cache\",\n                \"Expires\": \"0\",\n                \"Surrogate-Control\": \"no-store\"\n            }\n        });\n    } catch (error) {\n        console.error(\"更新用户资料错误:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"服务器错误\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1lBQ3BDO1FBQ0YsSUFDQTtZQUNFeEQsUUFBUTtZQUNSQyxTQUFTO2dCQUNQLGlCQUFpQjtnQkFDakIsVUFBVTtnQkFDVixXQUFXO2dCQUNYLHFCQUFxQjtZQUN2QjtRQUNGO0lBR0osRUFBRSxPQUFPaEIsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsYUFBYUE7UUFDM0IsT0FBT2QscURBQVlBLENBQUMyQixJQUFJLENBQ3RCO1lBQUVDLFNBQVM7WUFBT2QsT0FBTztRQUFRLEdBQ2pDO1lBQUVlLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc29jaWFsLWNsdWItd2ViLy4vYXBwL2FwaS91c2VyL3Byb2ZpbGUvcm91dGUudHM/MTZhYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbidcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcblxuLy8g56aB55So6Z2Z5oCB55Sf5oiQXG5leHBvcnQgY29uc3QgZHluYW1pYyA9ICdmb3JjZS1keW5hbWljJ1xuXG4vLyDliJvlu7ogU3VwYWJhc2Ug5a6i5oi356uv55qE5Ye95pWwIC0g5by65Yi25Yi35paw6L+e5o6lXG5mdW5jdGlvbiBjcmVhdGVTdXBhYmFzZUNsaWVudCgpIHtcbiAgY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgfHwgJ2h0dHBzOi8vY2toeGl2YmNuYWd3Z3B6bGp6cmwuc3VwYWJhc2UuY28nXG4gIGNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIHx8ICdleUpoYkdjaU9pSklVekkxTmlJc0luUjVjQ0k2SWtwWFZDSjkuZXlKcGMzTWlPaUp6ZFhCaFltRnpaU0lzSW5KbFppSTZJbU5yYUhocGRtSmpibUZuZDJkd2VteHFlbkpzSWl3aWNtOXNaU0k2SW1GdWIyNGlMQ0pwWVhRaU9qRTNOVE0xTWpRd016Z3NJbVY0Y0NJNk1qQTJPVEV3TURBek9IMC5aeG9POFFROUczdGdnUUZSQ0hqZG51bGd2NDVLdFZ5eDZCN1RucXJkSHg0J1xuXG4gIHRyeSB7XG4gICAgLy8g5Yib5bu65paw55qE5a6i5oi356uv5a6e5L6L77yM6YG/5YWN57yT5a2Y6Zeu6aKYXG4gICAgY29uc3QgY2xpZW50ID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXksIHtcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgcGVyc2lzdFNlc3Npb246IGZhbHNlIC8vIOemgeeUqOS8muivneaMgeS5heWMllxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIGNsaWVudFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGNsaWVudCBjcmVhdGlvbiBmYWlsZWQ6JywgZXJyb3IpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG4vLyDpqozor4EgSldUIHRva2VuXG5mdW5jdGlvbiB2ZXJpZnlUb2tlbihhdXRoSGVhZGVyOiBzdHJpbmcgfCBudWxsKSB7XG4gIGlmICghYXV0aEhlYWRlciB8fCAhYXV0aEhlYWRlci5zdGFydHNXaXRoKCdCZWFyZXIgJykpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIFxuICBjb25zdCB0b2tlbiA9IGF1dGhIZWFkZXIuc3Vic3RyaW5nKDcpXG4gIFxuICB0cnkge1xuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUIHx8ICd5b3VyLXNlY3JldC1rZXknKSBhcyBhbnlcbiAgICByZXR1cm4gZGVjb2RlZFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1Rva2VuIHZlcmlmaWNhdGlvbiBmYWlsZWQ6JywgZXJyb3IpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG4vLyDojrflj5bnlKjmiLfotYTmlplcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVN1cGFiYXNlQ2xpZW50KClcbiAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn5pWw5o2u5bqT6L+e5o6l5aSx6LSlJyB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldCgnYXV0aG9yaXphdGlvbicpXG4gICAgY29uc3QgZGVjb2RlZCA9IHZlcmlmeVRva2VuKGF1dGhIZWFkZXIpXG4gICAgXG4gICAgaWYgKCFkZWNvZGVkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn5pyq5o6I5p2D6K6/6ZeuJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygn6I635Y+W55So5oi36LWE5paZ77yM55So5oi3SUQ6JywgZGVjb2RlZC51c2VySWQpXG5cbiAgICAvLyDojrflj5bnlKjmiLfotYTmlpkgLSDkvb/nlKggKiDmn6Xor6LmiYDmnInlrZfmrrXvvIzlvLrliLbliLfmlrBcbiAgICBjb25zb2xlLmxvZygn5byA5aeL5p+l6K+i55So5oi3SUQ6JywgZGVjb2RlZC51c2VySWQpXG4gICAgY29uc29sZS5sb2coJ+S9v+eUqOeahFN1cGFiYXNlIFVSTDonLCBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgfHwgJ2h0dHBzOi8vY2toeGl2YmNuYWd3Z3B6bGp6cmwuc3VwYWJhc2UuY28nKVxuICAgIFxuICAgIC8vIOW8uuWItuWIt+aWsO+8mua3u+WKoOaXtumXtOaIs+mBv+WFjee8k+WtmFxuICAgIGNvbnN0IHsgZGF0YTogdXNlciwgZXJyb3I6IHVzZXJFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgnaWQnLCBkZWNvZGVkLnVzZXJJZClcbiAgICAgIC5zaW5nbGUoKVxuXG4gICAgY29uc29sZS5sb2coJ+afpeivouWIsOeahOeUqOaIt+aVsOaNrjonLCB1c2VyKVxuICAgIGNvbnNvbGUubG9nKCdiaW/lrZfmrrXlgLw6JywgdXNlcj8uYmlvKVxuICAgIGNvbnNvbGUubG9nKCdsb2NhdGlvbuWtl+auteWAvDonLCB1c2VyPy5sb2NhdGlvbilcbiAgICBjb25zb2xlLmxvZygndXBkYXRlZF9hdOWtl+auteWAvDonLCB1c2VyPy51cGRhdGVkX2F0KVxuXG4gICAgaWYgKHVzZXJFcnJvciB8fCAhdXNlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ+eUqOaIt+S4jeWtmOWcqCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XG4gICAgICApXG4gICAgfVxuXG4gICAgLy8g6I635Y+W55So5oi35YW06LajXG4gICAgY29uc3QgeyBkYXRhOiBpbnRlcmVzdHMsIGVycm9yOiBpbnRlcmVzdHNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1c2VyX2ludGVyZXN0cycpXG4gICAgICAuc2VsZWN0KCdpbnRlcmVzdCcpXG4gICAgICAuZXEoJ3VzZXJfaWQnLCBkZWNvZGVkLnVzZXJJZClcblxuICAgIC8vIOiOt+WPlueUqOaIt+WBj+WlvVxuICAgIGNvbnN0IHsgZGF0YTogcHJlZmVyZW5jZXMsIGVycm9yOiBwcmVmZXJlbmNlc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VzZXJfcHJlZmVyZW5jZXMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ3VzZXJfaWQnLCBkZWNvZGVkLnVzZXJJZClcbiAgICAgIC5zaW5nbGUoKVxuXG4gICAgLy8g6K6w5b2V5rS75Yqo5pel5b+XXG4gICAgYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1c2VyX2FjdGl2aXR5X2xvZ3MnKVxuICAgICAgLmluc2VydCh7XG4gICAgICAgIHVzZXJfaWQ6IGRlY29kZWQudXNlcklkLFxuICAgICAgICBhY3Rpdml0eV90eXBlOiAncHJvZmlsZV92aWV3JyxcbiAgICAgICAgYWN0aXZpdHlfZGF0YTogeyBwcm9maWxlX2lkOiBkZWNvZGVkLnVzZXJJZCB9XG4gICAgICB9KVxuXG4gICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoXG4gICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgLi4udXNlcixcbiAgICAgICAgICBpbnRlcmVzdHM6IGludGVyZXN0cz8ubWFwKChpOiBhbnkpID0+IGkuaW50ZXJlc3QpIHx8IFtdLFxuICAgICAgICAgIHByZWZlcmVuY2VzOiBwcmVmZXJlbmNlcyB8fCBudWxsXG4gICAgICAgIH1cbiAgICAgIH0pLFxuICAgICAge1xuICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLXN0b3JlLCBuby1jYWNoZSwgbXVzdC1yZXZhbGlkYXRlLCBwcm94eS1yZXZhbGlkYXRlJyxcbiAgICAgICAgICAnUHJhZ21hJzogJ25vLWNhY2hlJyxcbiAgICAgICAgICAnRXhwaXJlcyc6ICcwJyxcbiAgICAgICAgICAnU3Vycm9nYXRlLUNvbnRyb2wnOiAnbm8tc3RvcmUnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApXG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfojrflj5bnlKjmiLfotYTmlpnplJnor686JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfmnI3liqHlmajplJnor68nIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn1cblxuLy8g5pu05paw55So5oi36LWE5paZXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUFVUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVTdXBhYmFzZUNsaWVudCgpXG4gICAgaWYgKCFzdXBhYmFzZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ+aVsOaNruW6k+i/nuaOpeWksei0pScgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2F1dGhvcml6YXRpb24nKVxuICAgIGNvbnNvbGUubG9nKCdBdXRob3JpemF0aW9uIGhlYWRlcjonLCBhdXRoSGVhZGVyID8gJ+WtmOWcqCcgOiAn5LiN5a2Y5ZyoJylcbiAgICBcbiAgICBjb25zdCBkZWNvZGVkID0gdmVyaWZ5VG9rZW4oYXV0aEhlYWRlcilcbiAgICBjb25zb2xlLmxvZygnVG9rZW7op6PnoIHnu5Pmnpw6JywgZGVjb2RlZClcbiAgICBcbiAgICBpZiAoIWRlY29kZWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICfmnKrmjojmnYPorr/pl64nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCfnlKjmiLdJRDonLCBkZWNvZGVkLnVzZXJJZClcbiAgICBjb25zb2xlLmxvZygn55So5oi36YKu566xOicsIGRlY29kZWQuZW1haWwpXG5cbiAgICBjb25zdCB1cGRhdGVEYXRhID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBjb25zb2xlLmxvZygn5o6l5pS25Yiw55qE5Y6f5aeL5pWw5o2uOicsIHVwZGF0ZURhdGEpXG4gICAgXG4gICAgLy8g5YWB6K645pu05paw55qE5a2X5q61XG4gICAgY29uc3QgYWxsb3dlZEZpZWxkcyA9IFtcbiAgICAgICduYW1lJywgJ3Bob25lJywgJ2JpcnRoX2RhdGUnLCAnZ2VuZGVyJywgJ2F2YXRhcl91cmwnLCAnYmlvJyxcbiAgICAgICdsb2NhdGlvbicsICdvY2N1cGF0aW9uJywgJ2VkdWNhdGlvbicsICdyZWxhdGlvbnNoaXBfc3RhdHVzJyxcbiAgICAgICdoZWlnaHQnLCAnd2VpZ2h0J1xuICAgIF1cbiAgICBcbiAgICBjb25zdCBmaWx0ZXJlZERhdGE6IGFueSA9IHt9XG4gICAgYWxsb3dlZEZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHtcbiAgICAgIGlmICh1cGRhdGVEYXRhW2ZpZWxkXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZpbHRlcmVkRGF0YVtmaWVsZF0gPSB1cGRhdGVEYXRhW2ZpZWxkXVxuICAgICAgICBjb25zb2xlLmxvZyhg5a2X5q61ICR7ZmllbGR9OiAke3VwZGF0ZURhdGFbZmllbGRdfSAtPiAke2ZpbHRlcmVkRGF0YVtmaWVsZF19YClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgY29uc29sZS5sb2coJ+i/h+a7pOWQjueahOaVsOaNrjonLCBmaWx0ZXJlZERhdGEpXG4gICAgY29uc29sZS5sb2coJ+eUqOaIt0lEOicsIGRlY29kZWQudXNlcklkKVxuXG4gICAgLy8g5pu05paw55So5oi36LWE5paZIC0g5L2/55So5LqL5Yqh56Gu5L+d5pWw5o2u5LiA6Ie05oCnXG4gICAgY29uc29sZS5sb2coJ+W8gOWni+abtOaWsOaVsOaNruW6ky4uLicpXG4gICAgY29uc3QgeyBkYXRhOiB1cGRhdGVkVXNlciwgZXJyb3I6IHVwZGF0ZUVycm9yLCBjb3VudCB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAudXBkYXRlKGZpbHRlcmVkRGF0YSlcbiAgICAgIC5lcSgnaWQnLCBkZWNvZGVkLnVzZXJJZClcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICBjb25zb2xlLmxvZygn5pu05paw57uT5p6cOicsIHsgdXBkYXRlZFVzZXIsIHVwZGF0ZUVycm9yLCBjb3VudCB9KVxuXG4gICAgaWYgKHVwZGF0ZUVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfmm7TmlrDnlKjmiLfotYTmlpnplJnor686JywgdXBkYXRlRXJyb3IpXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn5pu05paw5aSx6LSlJyB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoIXVwZGF0ZWRVc2VyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfmm7TmlrDmk43kvZzmsqHmnInov5Tlm57nlKjmiLfmlbDmja4nKVxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ+abtOaWsOWksei0pSAtIOayoeaciei/lOWbnuaVsOaNricgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ+abtOaWsOWQjueahOeUqOaIt+aVsOaNrjonLCB1cGRhdGVkVXNlcilcblxuICAgIC8vIOazqOaEj++8mueUseS6juaVsOaNruW6k+i/nuaOpemXrumimO+8jOaIkeS7rOebtOaOpei/lOWbnuabtOaWsOaTjeS9nOi/lOWbnueahOaVsOaNrlxuICAgIC8vIOiAjOS4jeaYr+i/m+ihjOehruiupOafpeivou+8jOWboOS4uuehruiupOafpeivouWPr+iDvei/lOWbnuaXp+aVsOaNrlxuXG4gICAgLy8g5pu05paw5YW06Laj77yI5aaC5p6c5o+Q5L6b77yJXG4gICAgaWYgKHVwZGF0ZURhdGEuaW50ZXJlc3RzICYmIEFycmF5LmlzQXJyYXkodXBkYXRlRGF0YS5pbnRlcmVzdHMpKSB7XG4gICAgICAvLyDliKDpmaTnjrDmnInlhbTotqNcbiAgICAgIGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCd1c2VyX2ludGVyZXN0cycpXG4gICAgICAgIC5kZWxldGUoKVxuICAgICAgICAuZXEoJ3VzZXJfaWQnLCBkZWNvZGVkLnVzZXJJZClcblxuICAgICAgLy8g5o+S5YWl5paw5YW06LajXG4gICAgICBpZiAodXBkYXRlRGF0YS5pbnRlcmVzdHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBpbnRlcmVzdHNEYXRhID0gdXBkYXRlRGF0YS5pbnRlcmVzdHMubWFwKChpbnRlcmVzdDogc3RyaW5nKSA9PiAoe1xuICAgICAgICAgIHVzZXJfaWQ6IGRlY29kZWQudXNlcklkLFxuICAgICAgICAgIGludGVyZXN0OiBpbnRlcmVzdC50cmltKClcbiAgICAgICAgfSkpXG5cbiAgICAgICAgYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAuZnJvbSgndXNlcl9pbnRlcmVzdHMnKVxuICAgICAgICAgIC5pbnNlcnQoaW50ZXJlc3RzRGF0YSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDmm7TmlrDlgY/lpb3vvIjlpoLmnpzmj5DkvpvvvIlcbiAgICBpZiAodXBkYXRlRGF0YS5wcmVmZXJlbmNlcykge1xuICAgICAgY29uc3QgeyBlcnJvcjogcHJlZkVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgndXNlcl9wcmVmZXJlbmNlcycpXG4gICAgICAgIC51cHNlcnQoe1xuICAgICAgICAgIHVzZXJfaWQ6IGRlY29kZWQudXNlcklkLFxuICAgICAgICAgIC4uLnVwZGF0ZURhdGEucHJlZmVyZW5jZXNcbiAgICAgICAgfSlcblxuICAgICAgaWYgKHByZWZFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfmm7TmlrDnlKjmiLflgY/lpb3plJnor686JywgcHJlZkVycm9yKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIOiusOW9lea0u+WKqOaXpeW/l1xuICAgIGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndXNlcl9hY3Rpdml0eV9sb2dzJylcbiAgICAgIC5pbnNlcnQoe1xuICAgICAgICB1c2VyX2lkOiBkZWNvZGVkLnVzZXJJZCxcbiAgICAgICAgYWN0aXZpdHlfdHlwZTogJ3Byb2ZpbGVfdXBkYXRlJyxcbiAgICAgICAgYWN0aXZpdHlfZGF0YTogeyB1cGRhdGVkX2ZpZWxkczogT2JqZWN0LmtleXMoZmlsdGVyZWREYXRhKSB9XG4gICAgICB9KVxuXG4gICAgLy8g6I635Y+W5pyA5paw55qE5YW06Laj5pWw5o2uXG4gICAgY29uc3QgeyBkYXRhOiBsYXRlc3RJbnRlcmVzdHMgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndXNlcl9pbnRlcmVzdHMnKVxuICAgICAgLnNlbGVjdCgnaW50ZXJlc3QnKVxuICAgICAgLmVxKCd1c2VyX2lkJywgZGVjb2RlZC51c2VySWQpXG5cbiAgICAvLyDojrflj5bmnIDmlrDnmoTlgY/lpb3mlbDmja5cbiAgICBjb25zdCB7IGRhdGE6IGxhdGVzdFByZWZlcmVuY2VzIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VzZXJfcHJlZmVyZW5jZXMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ3VzZXJfaWQnLCBkZWNvZGVkLnVzZXJJZClcbiAgICAgIC5zaW5nbGUoKVxuXG4gICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoXG4gICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICfmm7TmlrDmiJDlip8nLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIC4uLnVwZGF0ZWRVc2VyLFxuICAgICAgICAgIGludGVyZXN0czogbGF0ZXN0SW50ZXJlc3RzPy5tYXAoaSA9PiBpLmludGVyZXN0KSB8fCBbXSxcbiAgICAgICAgICBwcmVmZXJlbmNlczogbGF0ZXN0UHJlZmVyZW5jZXMgfHwgbnVsbFxuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIHtcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ2FjaGUtQ29udHJvbCc6ICduby1zdG9yZSwgbm8tY2FjaGUsIG11c3QtcmV2YWxpZGF0ZSwgcHJveHktcmV2YWxpZGF0ZScsXG4gICAgICAgICAgJ1ByYWdtYSc6ICduby1jYWNoZScsXG4gICAgICAgICAgJ0V4cGlyZXMnOiAnMCcsXG4gICAgICAgICAgJ1N1cnJvZ2F0ZS1Db250cm9sJzogJ25vLXN0b3JlJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign5pu05paw55So5oi36LWE5paZ6ZSZ6K+vOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAn5pyN5Yqh5Zmo6ZSZ6K+vJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImp3dCIsImNyZWF0ZUNsaWVudCIsImR5bmFtaWMiLCJjcmVhdGVTdXBhYmFzZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiY2xpZW50IiwiYXV0aCIsInBlcnNpc3RTZXNzaW9uIiwiZXJyb3IiLCJjb25zb2xlIiwidmVyaWZ5VG9rZW4iLCJhdXRoSGVhZGVyIiwic3RhcnRzV2l0aCIsInRva2VuIiwic3Vic3RyaW5nIiwiZGVjb2RlZCIsInZlcmlmeSIsIkpXVF9TRUNSRVQiLCJHRVQiLCJyZXF1ZXN0Iiwic3VwYWJhc2UiLCJqc29uIiwic3VjY2VzcyIsInN0YXR1cyIsImhlYWRlcnMiLCJnZXQiLCJsb2ciLCJ1c2VySWQiLCJkYXRhIiwidXNlciIsInVzZXJFcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsImJpbyIsImxvY2F0aW9uIiwidXBkYXRlZF9hdCIsImludGVyZXN0cyIsImludGVyZXN0c0Vycm9yIiwicHJlZmVyZW5jZXMiLCJwcmVmZXJlbmNlc0Vycm9yIiwiaW5zZXJ0IiwidXNlcl9pZCIsImFjdGl2aXR5X3R5cGUiLCJhY3Rpdml0eV9kYXRhIiwicHJvZmlsZV9pZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJtYXAiLCJpIiwiaW50ZXJlc3QiLCJQVVQiLCJlbWFpbCIsInVwZGF0ZURhdGEiLCJhbGxvd2VkRmllbGRzIiwiZmlsdGVyZWREYXRhIiwiZm9yRWFjaCIsImZpZWxkIiwidW5kZWZpbmVkIiwidXBkYXRlZFVzZXIiLCJ1cGRhdGVFcnJvciIsImNvdW50IiwidXBkYXRlIiwiQXJyYXkiLCJpc0FycmF5IiwiZGVsZXRlIiwibGVuZ3RoIiwiaW50ZXJlc3RzRGF0YSIsInRyaW0iLCJwcmVmRXJyb3IiLCJ1cHNlcnQiLCJ1cGRhdGVkX2ZpZWxkcyIsIk9iamVjdCIsImtleXMiLCJsYXRlc3RJbnRlcmVzdHMiLCJsYXRlc3RQcmVmZXJlbmNlcyIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/user/profile/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/ws","vendor-chunks/semver","vendor-chunks/whatwg-url","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/webidl-conversions","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time","vendor-chunks/isows"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2Fprofile%2Froute&page=%2Fapi%2Fuser%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2Fprofile%2Froute.ts&appDir=%2FUsers%2Fvincent%2FDesktop%2Fsocial%20club%20web%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvincent%2FDesktop%2Fsocial%20club%20web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();